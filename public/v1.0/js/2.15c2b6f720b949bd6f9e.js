webpackJsonp([2],{"L+cR":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{msg:"这个是历史盘点列表页",currentPage:1,pageSize:10,total:0,result:null,dateVal:[new Date(new Date(new Date(new Date-2592e6).toLocaleDateString()).getTime()),new Date((new Date).toLocaleDateString())],operatorNum:null,chooseLine:0,isEmpty:!1,showPage:!1}},methods:{pageChange:function(t){if(null!=this.dateVal&&""!=this.dateVal){this.currentPage=t;var e={createTimeBegin:parseInt(this.dateVal[0].getTime()/1e3),createTimeEnd:parseInt((this.dateVal[1].getTime()+864e5-1)/1e3),currentPage:this.currentPage,pageSize:this.pageSize};this.operatorNum&&(e.operator=this.operatorNum),this.getData(e)}else this.$emit("showError","请选择时间范围！")},toInventoryDetail:function(t){this.$router.push({path:"/materialList/inventoryHistoryList/inventoryHistoryDetail",query:{orderSn:t}})},searchInventoryHistory:function(){this.pageChange(1)},getData:function(t){var e=this;this.$emit("controLoading",!0),this.$httpExt().post("/materials/getInventoryHistoryList",t).then(function(t){e.$emit("controLoading",!1),e.result=t,e.pageSize=t.pageSize,e.total=t.totalRecord},function(t){e.$emit("showError",t.errorCode+":"+t.errorMsg)})},selectLine:function(t){this.chooseLine=t},datePickRange:function(){var t=this.dateVal[0],e=new Date(this.dateVal[1].getTime()+864e5-1);parseInt(Math.abs(e-t)/1e3/60/60/24)>30&&(this.$emit("showError","查询时间跨度不可超过30天！"),this.dateVal=[new Date(new Date(new Date(new Date-2592e6).toLocaleDateString()).getTime()),new Date((new Date).toLocaleDateString())])}},watch:{result:function(t,e){null!=t&&t.data.length>0?(this.isEmpty=!1,this.showPage=!0):(this.isEmpty=!0,this.showPage=!1)}},mounted:function(){this.pageChange(1)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"c64 top-bot position-relative"},[t._v("\n        历史原材料盘点记录如下\n        "),a("div",{staticClass:"fr"},[a("div",{staticClass:"fl mr12",staticStyle:{"padding-top":"3px"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.datePickRange},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),t._v(" "),a("div",{staticClass:"fl mr12"},[a("st-input",{attrs:{placeholder:"输入操作人工号"},model:{value:t.operatorNum,callback:function(e){t.operatorNum=e},expression:"operatorNum"}})],1),t._v(" "),a("div",{staticClass:"fl"},[a("st-button",{attrs:{size:"ss"},on:{click:t.searchInventoryHistory}},[t._v("查询")])],1)])]),t._v(" "),a("div",{staticClass:"rs-container"},[a("div",{staticClass:"records"},[null!=t.result?a("ul",{staticClass:"records timeAxis timeAxis-v"},t._l(t.result.data,function(e,s){return a("li",{key:e.orderSn,staticClass:"records-item timeAxis-item",class:{active:s==t.chooseLine},on:{click:function(e){t.selectLine(s)}}},[a("div",{staticClass:"timeAxis-item-c"},[a("div",{staticClass:"rs-item-c"},[a("div",[a("p",{staticClass:"c64"},[a("span",[t._v(t._s(t.$changeDateToString(e.createTime)))]),a("span",{staticClass:"fr"},[a("st-button",{attrs:{type:"text"},on:{click:function(a){t.toInventoryDetail(e.orderSn)}}},[t._v("查看详情"),a("i",{staticClass:"el-icon-arrow-right"})])],1)]),t._v(" "),a("p",{staticClass:"c64 material-records-option"},[a("span",[t._v("操作人："+t._s(e.operator))]),t._v(" "),a("span",[t._v("累计领取原材料数量："),a("strong",{staticClass:"c32"},[t._v(t._s(e.productNum))])]),t._v(" "),a("span",[t._v("实际使用数量："),a("strong",{staticClass:"c32"},[t._v(t._s(e.actualUseNum))])]),t._v(" "),a("span",[t._v("盘点单号："+t._s(e.orderSn))])])])])])])})):t._e()])]),t._v(" "),t.showPage?[a("st-pagenation",{attrs:{currentPage:t.currentPage,size:t.pageSize,total:t.total},on:{pagechange:t.pageChange}})]:t._e(),t._v(" "),t.isEmpty?a("div",{staticClass:"search-null text-center"},[t._m(0),t._v(" "),a("div",{staticClass:"text-center f14 c32"},[t._v("门店暂无盘点记录")])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img"},[e("span",{staticClass:"icon"})])}]};var n=a("Z0/y")(s,i,!1,function(t){a("Te3j")},null,null);e.default=n.exports},Te3j:function(t,e){}});