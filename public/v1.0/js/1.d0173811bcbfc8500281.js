webpackJsonp([1],{"3vTm":function(t,e){},Mq2B:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={data:function(){return{msg:"这个是原材料领取记录列表页",total:0,currentPage:1,pageSize:10,result:null,operatorNum:null,selectNum:0,dateVal:[new Date(new Date(new Date(new Date-2592e6).toLocaleDateString()).getTime()),new Date((new Date).toLocaleDateString())],isEmpty:!1,showPage:!1}},methods:{toDetail:function(t){this.$router.push({path:"/materialList/pickHistoryList/pickHistoryDetail",query:{orderSn:t}})},searchRecording:function(){this.pageChange(1)},pageChange:function(t){if(this.$emit("controLoading",!0),this.currentPage=t,null!=this.dateVal&&""!=this.dateVal){var e={currentPage:this.currentPage,pageSize:this.pageSize,createTimeBegin:parseInt(this.dateVal[0].getTime()/1e3),createTimeEnd:parseInt((this.dateVal[1].getTime()+864e5-1)/1e3)};console.log(new Date),this.operatorNum&&(e.operator=this.operatorNum),this.getData(e)}else this.$emit("showError","请选择时间范围！")},datePickRange:function(){var t=this.dateVal[0],e=new Date(this.dateVal[1].getTime()+864e5-1);parseInt(Math.abs(e-t)/1e3/60/60/24)>30&&(this.$emit("showError","查询时间跨度不可超过30天！"),this.dateVal=[new Date(new Date(new Date(new Date-2592e6).toLocaleDateString()).getTime()),new Date((new Date).toLocaleDateString())])},getData:function(t){var e=this;this.$httpExt().post("materials/getPickHistoryList",t).then(function(t){e.result=t.data,e.pageSize=t.pageSize,e.total=t.totalRecord},function(t){e.$emit("showError",t.errorCode+":"+t.errorMsg)}).then(function(t){e.$emit("controLoading",!1),e.initData()})},initData:function(){this.selectNum=0}},watch:{result:function(t,e){null!=t&&t.length>0?(this.isEmpty=!1,this.showPage=!0):(this.isEmpty=!0,this.showPage=!1)}},mounted:function(){this.pageChange(1)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"c64 top-bot position-relative"},[t._v("\n        历史原材料领取记录如下\n        "),a("div",{staticClass:"fr"},[a("div",{staticClass:"fl mr12",staticStyle:{"margin-top":"3px"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.datePickRange},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),t._v(" "),a("div",{staticClass:"fl mr12"},[a("st-input",{attrs:{placeholder:"输入操作人工号"},model:{value:t.operatorNum,callback:function(e){t.operatorNum=e},expression:"operatorNum"}})],1),t._v(" "),a("div",{staticClass:"fl"},[a("st-button",{staticClass:"st-button",attrs:{slot:"append",type:"ss"},on:{click:t.searchRecording},slot:"append"},[t._v("查询")])],1)])]),t._v(" "),a("div",{staticClass:"rs-container"},[a("div",{staticClass:"records"},[a("ul",{staticClass:"records timeAxis timeAxis-v"},t._l(t.result,function(e,s){return a("li",{key:e.index,staticClass:"records-item timeAxis-item",class:{active:t.selectNum==s},on:{click:function(e){t.selectNum=s}}},[a("div",{staticClass:"timeAxis-item-c"},[a("div",{staticClass:"rs-item-c"},[a("div",[a("p",{staticClass:"c64"},[a("span",[t._v(t._s(t.$changeDateToString(e.createTime)))]),t._v(" "),a("span",{staticClass:"fr"},[a("st-button",{attrs:{type:"text"},on:{click:function(a){t.toDetail(e.orderSn)}}},[t._v("查看详情"),a("i",{staticClass:"el-icon-arrow-right"})])],1)]),t._v(" "),a("p",{staticClass:"c64 material-records-option"},[a("span",[t._v("操作人："+t._s(e.operator))]),t._v(" "),a("span",[t._v("领取了"),a("strong",{staticClass:"c32"},[t._v(t._s(e.skuNum)+"款")]),t._v("原材料")]),a("span",[t._v("领取单号："+t._s(e.orderSn))])])])])])])}))])]),t._v(" "),t.showPage?[a("st-pagenation",{attrs:{currentPage:t.currentPage,size:t.pageSize,total:t.total},on:{pagechange:t.pageChange}})]:t._e(),t._v(" "),t.isEmpty?a("div",{staticClass:"search-null text-center"},[t._m(0),t._v(" "),a("div",{staticClass:"text-center f14 c32"},[t._v("门店暂无领取记录")])]):t._e()],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img"},[e("span",{staticClass:"icon"})])}]};var n=a("Z0/y")(s,i,!1,function(t){a("3vTm")},null,null);e.default=n.exports}});