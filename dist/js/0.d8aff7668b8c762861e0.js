webpackJsonp([0],{"P/M3":function(t,i){},eCoc:function(t,i){},pre3:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a,o=s("WxFH"),e=s.n(o),c={data:function(){return{dialogModifyConfirm:!1,dialogModifySuccess:!1,dialogModifyHistory:!1,dialogModifyPrice:!1,result:"",dialogModifyHistoryDetail:{dialogModifyHistoryDetailContent:{},dialogModifyHistoryDetailList:{}},dialogModifyPriceDetail:{},price:"",discountPrice:"",discountPercent:"",isEmpty:!1,showPage:!1,total:0,pageSize:10,currentPage:1}},methods:(a={toMakeProductList:function(){this.$router.push({path:"/makeProductList"})},ModifyConfirm:function(){this.dialogModifyConfirm=!1,this.dialogModifyPrice=!1,this.dialogModifySuccess=!0},formatDate:function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},showDialogModifyHistory:function(t){var i=this,s=new Date,a=new Date;s=s.setMonth(s.getMonth()-1),s=new Date(s),s=this.formatDate(s),a=this.formatDate(a);var o=this,e={productSn:t.productSn,startTime:s,endTime:a};o.dialogModifyHistory=!0,o.$httpExt().post("modifyPrice/getUpdatePriceHistoryList",e).then(function(i){o.dialogModifyHistoryDetail.dialogModifyHistoryDetailList=i,o.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent=t,console.log(i)},function(t){i.$emit("showError",t.errorCode+":"+t.errorMsg)})},clearDialogModifyHistoryClose:function(){this.dialogModifyHistory=!1,this.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent={},this.dialogModifyHistoryDetail.dialogModifyHistoryDetailList={}},showDialogModifyPrice:function(t){this.dialogModifyPrice=!0,this.dialogModifyPriceDetail=t,this.dialogModifyPriceDetail.productSn=t.productSn},changePrice:function(t){this.discountPrice=(this.dialogModifyPriceDetail.suggestPrice*t).toFixed(2),this.discountPercent=10*t},clearDialogModifyPrice:function(){this.discountPrice="",this.discountPercent=""}},e()(a,"ModifyConfirm",function(t){var i=this;this.$emit("controLoading",!0);var s={productSn:t.productSn,price:this.discountPrice,merchantSn:t.merchantSn,merchantName:t.merchantName};this.$httpExt().post("modifyPrice/updatePrice",s).then(function(t){i.$emit("controLoading",!1),i.dialogModifyConfirm=!1,i.dialogModifyPrice=!1,i.dialogModifySuccess=!0},function(t){i.$emit("showError","改价失败!",t.errorMsg)})}),e()(a,"toPickList",function(){this.$router.push({path:"/materialList/pickList"})}),e()(a,"refreshPage",function(){this.clearDialogModifyPrice(),this.pageChange(this.currentPage)}),e()(a,"pageChange",function(t){this.currentPage=t;var i={currentPage:this.currentPage,pageSize:10};this.fetchData(i)}),e()(a,"fetchData",function(t){var i=this;this.$emit("controLoading",!0),this.$httpExt().post("modifyPrice/getChangeableList",t).then(function(t){i.$emit("controLoading",!1),i.result=t.data,i.total=t.totalRecord,i.pageSize=t.pageSize,0==i.total?i.isEmpty=!0:i.showPage=!0},function(t){i.isEmpty=!0,i.showPage=!1,i.$emit("showError",t.errorCode+":"+t.errorMsg)})}),a),mounted:function(){this.pageChange(1)}},r={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",{staticClass:"c64 top-bot position-relative"},[t._v("\n        门店共有以下 "),s("strong",{staticClass:"cblack"},[t._v(t._s(t.total)+"款")]),t._v(" 商品已制作    请参考建议售价，合理定价\n        "),s("st-button",{staticClass:"position-absolute product-header-btn-blue",attrs:{size:"xxl"},on:{click:t.toMakeProductList}},[t._v("制作商品")])],1),t._v(" "),s("ul",{staticClass:"product-list display-flex list-hover"},t._l(t.result,function(i){return s("li",{key:i.index},[s("img",{staticClass:"fl",attrs:{src:i.productImageSmall}}),t._v(" "),s("div",{staticClass:"fr product-info"},[s("h3",{staticClass:"f16 c32 name"},[t._v(t._s(i.productName))]),t._v(" "),s("p",{staticClass:"f12 c64 text"},[t._v("建议售价："),s("strong",{staticClass:"f16"},[t._v("￥"+t._s(i.suggestPrice))])]),t._v(" "),s("p",{staticClass:"f12 c64 text"},[t._v("当前售价："),s("strong",{staticClass:"cred f16"},[t._v("￥"+t._s(i.price))])]),t._v(" "),s("p",{staticClass:"f12 c64 text"},[t._v("已有库存："),s("span",{staticClass:"f14"},[t._v(t._s(i.stockNum))])])]),t._v(" "),s("div",{staticClass:"product-option"},[s("st-button",{staticClass:"fl",attrs:{type:"text",size:"xs"},on:{click:function(s){t.showDialogModifyHistory(i)}}},[t._v("查看历史改价记录")]),t._v(" "),s("st-button",{staticClass:"fr",attrs:{size:"xs"},on:{click:function(s){t.showDialogModifyPrice(i)}}},[t._v("修改价格")])],1)])})),t._v(" "),t.showPage?s("st-pagenation",{attrs:{total:t.total,size:t.pageSize,currentPage:t.currentPage},on:{pagechange:t.pageChange}}):t._e(),t._v(" "),s("st-dialog",{attrs:{title:"修改价格",width:"50%",visible:t.dialogModifyPrice,center:""},on:{"update:visible":function(i){t.dialogModifyPrice=i},close:t.clearDialogModifyPrice}},[s("p",{staticClass:"c96 make-instruction-text "},[t._v("请参考商品的建议零售价，设置合理的销售价格。尽量不要降价超过建议价的20%。"),s("br"),t._v("价格折扣，均以建议零售价为基准")]),t._v(" "),s("ul",{staticClass:"product-list display-flex "},[s("li",[s("img",{staticClass:"fl",staticStyle:{"margin-right":"20px"},attrs:{src:t.dialogModifyPriceDetail.productImageSmall}}),t._v(" "),s("div",{},[s("h3",{staticClass:"f16 c32 name "},[t._v(t._s(t.dialogModifyPriceDetail.productName))]),t._v(" "),s("p",{staticClass:"f12 c64 text "},[t._v("建议售价："),s("strong",{staticClass:"cred f16 "},[t._v("￥"+t._s(t.dialogModifyPriceDetail.suggestPrice))])]),t._v(" "),s("p",{staticClass:"f12 c64 text "},[t._v("已有库存："),s("span",{staticClass:"f14 "},[t._v(t._s(t.dialogModifyPriceDetail.stockNum))])])])])]),t._v(" "),s("p",{staticClass:"c64 f14 select-price-tips "},[t._v("请选择商品价格折扣")]),t._v(" "),s("ul",{staticClass:"select-price clearfix"},[s("li",{staticClass:"text-center f14 radius-4 c32",class:{current:5===t.discountPercent},on:{click:function(i){t.changePrice(.5)}}},[t._v("5折")]),t._v(" "),s("li",{staticClass:"text-center f14 radius-4 c32",class:{current:6===t.discountPercent},on:{click:function(i){t.changePrice(.6)}}},[t._v("6折")]),t._v(" "),s("li",{staticClass:"text-center f14 radius-4 c32",class:{current:7===t.discountPercent},on:{click:function(i){t.changePrice(.7)}}},[t._v("7折")]),t._v(" "),s("li",{staticClass:"text-center f14 radius-4 c32",class:{current:8===t.discountPercent},on:{click:function(i){t.changePrice(.8)}}},[t._v("8折")]),t._v(" "),s("li",{staticClass:"text-center f14 radius-4 c32",class:{current:9===t.discountPercent},on:{click:function(i){t.changePrice(.9)}}},[t._v("9折")]),t._v(" "),s("li",{staticClass:"text-center f14 radius-4 c32",class:{current:10===t.discountPercent},on:{click:function(i){t.changePrice(1)}}},[t._v("原价")])]),t._v(" "),""==!t.discountPrice?s("p",{staticClass:"text-center"},[s("span",{staticClass:"f14 "},[t._v("建议售价："),s("strong",{staticClass:"cred "},[t._v("￥"+t._s(t.dialogModifyPriceDetail.suggestPrice))]),t._v("      折扣价："),s("strong",{staticClass:"cred"},[t._v("￥"+t._s(t.discountPrice))])])]):t._e(),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("st-button",{attrs:{size:"m",disabled:""===t.discountPrice},on:{click:function(i){t.dialogModifyConfirm=!0}}},[t._v("确认改价")])],1)]),t._v(" "),s("st-dialog",{attrs:{width:"50%",visible:t.dialogModifyConfirm,center:""},on:{"update:visible":function(i){t.dialogModifyConfirm=i}},model:{value:t.dialogModifyPriceDetail,callback:function(i){t.dialogModifyPriceDetail=i},expression:"dialogModifyPriceDetail"}},[s("h3",{staticClass:"c32 f30 make-instruction-title"},[t._v("是否确认修改价格")]),t._v(" "),s("p",{staticClass:"c96 make-instruction-text"},[t._v("确认修改后，将立即生效！请留意电子价签是否已经同步更新")]),t._v(" "),s("div",{staticClass:"text-center display-flex modify-price-wrap"},[s("div",{staticClass:"c32 modify-price-box display-flex"},[s("div",[s("p",{staticClass:"f16"},[t._v("原价")]),t._v(" "),s("p",{staticClass:"f16"},[s("strong",[t._v("￥"+t._s(t.dialogModifyPriceDetail.suggestPrice))])])])]),t._v(" "),s("div",{staticClass:"modify-price-arw display-flex"},[s("i",{staticClass:"icon-arw display-inlineblock"})]),t._v(" "),s("div",{staticClass:"c32 f16 modify-price-box display-flex"},[s("div",[s("p",{staticClass:"f16"},[t._v("修改后价格")]),t._v(" "),s("p",{staticClass:"f16"},[s("strong",{staticClass:"cred"},[t._v("￥"+t._s(t.discountPrice))])])])])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("st-button",{attrs:{size:"m",type:"gray",border:""},on:{click:function(i){t.dialogModifyConfirm=!1}}},[t._v("返回调整")]),t._v(" "),s("st-button",{attrs:{size:"m"},on:{click:function(i){t.ModifyConfirm(t.dialogModifyPriceDetail)}}},[t._v("确认改价")])],1)]),t._v(" "),s("st-notification",{attrs:{width:"50%",visible:t.dialogModifySuccess},on:{"update:visible":function(i){t.dialogModifySuccess=i},close:t.refreshPage}},[s("div",{staticClass:"pop-suc-box clearfix"},[s("i",{staticClass:"fl icon-zcp-suc"}),t._v(" "),s("div",{staticClass:"fl"},[s("p",{staticClass:"c32 f24"},[t._v("改价成功！")]),t._v(" "),s("p",{staticClass:"c96 tips"},[t._v("商品价格已经生效！请留意电子价签是否已经同步更新")]),t._v(" "),s("p",{staticClass:"c32 f16",staticStyle:{"padding-top":"20px"}},[t._v("修改后价格 "),s("strong",{staticClass:"cred"},[t._v("￥"+t._s(t.discountPrice))])])])])]),t._v(" "),s("st-dialog",{attrs:{title:"改价历史记录查询",width:"50%",visible:t.dialogModifyHistory,center:""},on:{"update:visible":function(i){t.dialogModifyHistory=i},close:t.clearDialogModifyHistoryClose}},[s("p",{staticClass:"c96 make-instruction-text"},[t._v("仅可查询近1个月的记录，如需查询1个月以前的改价记录请联系总部运营同事")]),t._v(" "),s("ul",{staticClass:"product-list display-flex"},[s("li",[s("img",{staticClass:"fl",staticStyle:{"margin-right":"20px"},attrs:{src:t.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent.productImageSmall}}),t._v(" "),s("div",[s("h3",{staticClass:"f16 c32 name "},[t._v(t._s(t.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent.productName))]),t._v(" "),s("p",{staticClass:"f12 c64 text "},[t._v("建议售价："),s("strong",{staticClass:"f16 "},[t._v("￥"+t._s(t.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent.suggestPrice))])]),t._v(" "),s("p",{staticClass:"fr f12 c64 text",staticStyle:{"margin-top":"-25px"}},[t._v("当前售价："),s("strong",{staticClass:"cred f16 "},[t._v("￥"+t._s(t.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent.price))])]),t._v(" "),s("p",{staticClass:"f12 c64 text "},[t._v("已有库存："),s("span",{staticClass:"f14 "},[t._v(t._s(t.dialogModifyHistoryDetail.dialogModifyHistoryDetailContent.stockNum))])])])])]),t._v(" "),s("div",{staticClass:"modify-price-record"},[s("div",{staticClass:"timeline-wrap"},t._l(t.dialogModifyHistoryDetail.dialogModifyHistoryDetailList,function(i){return""==!t.dialogModifyHistoryDetail.dialogModifyHistoryDetailList?s("div",{key:i.id,staticClass:"timeline-one"},[s("p",{staticClass:"tit cred"},[t._v("¥"+t._s(i.price))]),t._v(" "),s("p",{staticClass:"content"},[t._v(t._s(i.operator))]),t._v(" "),s("p",{staticClass:"time"},[t._v(t._s(i.modifiedTime.split(" ")[0])+" "),s("br"),t._v(" "+t._s(i.modifiedTime.split(" ")[1]))]),t._v(" "),s("span",{staticClass:"circle current"})]):t._e()})),t._v(" "),""==t.dialogModifyHistoryDetail.dialogModifyHistoryDetailList?s("p",{staticClass:"f16 text-center"},[t._v("近一个月暂无改价记录")]):t._e()]),t._v(" "),t.dialogModifyHistoryDetail.dialogModifyHistoryDetailList.length>5?s("p",{staticClass:"c64 f12 select-price-tips text-center"},[t._v("温馨提示：可左右拖动查看早的改价记录哦~")]):t._e(),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("st-button",{attrs:{size:"m"},on:{click:function(i){t.dialogModifyHistory=!1}}},[t._v("确定")])],1)]),t._v(" "),t.isEmpty?s("div",{staticClass:"search-null text-center"},[t._m(0),t._v(" "),s("div",{staticClass:"text-center f14 c32"},[t._v("门店暂时没有可制作的商品")])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"img"},[i("span",{staticClass:"icon"})])}]};var l=s("Aizv")(c,r,!1,function(t){s("eCoc"),s("P/M3")},"data-v-55aa4a25",null);i.default=l.exports}});