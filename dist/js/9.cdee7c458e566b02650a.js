webpackJsonp([9],{"iP/c":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("3SZ7"),e=s.n(a),n={data:function(){return{dialogGroundingSuccess:!1,result:"",initdata:null,num:1,count:0,orderList:[],isEmpty:!1}},methods:{onChangeNumber:function(t){this.num=t},getData:function(t){var i=this;this.$emit("controLoading",!0),t||(t={productSn:this.initdata.productSn}),this.$httpExt().post("/makeProduct/getMakeOrderList",t).then(function(t){i.orderList=t,i.$emit("controLoading",!1),0==i.orderList.length&&(i.isEmpty=!0)},function(t){i.isEmpty=!0,i.$emit("controLoading",!1),i.$emit("showError",t.errorCode+":"+t.errorMsg)})},confirmGrounding:function(t){var i=this;if(this.$emit("controLoading",!0),this.num<=0)this.minNumberTips=!0;else{var s={productSn:this.initdata.productSn,productId:this.initdata.productId,productName:this.initdata.productName,productStock:this.num,merchantSn:this.initdata.merchantSn,merchantName:this.initdata.merchantName,price:this.initdata.price};this.$httpExt().post("makeProduct/confirmMake",{jsonParam:e()(s)}).then(function(t){i.$emit("controLoading",!1),i.count=i.num,i.dialogGroundingSuccess=!0},function(t){i.$emit("controLoading",!1),i.$emit("showError","上架失败！",t.errorMsg)})}},toMakeProduct:function(){this.$router.push({path:"/makeProductList"})}},mounted:function(){this.initdata=JSON.parse(this.$getCookie("item")),this.getData()},destroyed:function(){this.$removeCookie("item")}},c={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("div",{staticClass:"c64 top-bot position-relative"},[t._v("\n        请根据实际制作情况填写制作数量，可分多次制作，多次填写    请根据销售情况制作商品数量不要一次性制作太多，避免浪费\n        "),s("st-button",{staticClass:"position-absolute product-header-btn-blue",attrs:{size:"xxl",disabled:0==this.num},on:{click:t.confirmGrounding}},[t._v("确定上架售卖")])],1),t._v(" "),null!=t.initdata?s("div",{staticClass:"product-list-wrap display-flex"},[s("div",{staticClass:"product-list-detail"},[s("i",{staticClass:"position-absolute tag-zcp"},[t._v("制成品")]),t._v(" "),s("img",{staticClass:"fl img-s",attrs:{src:t.initdata.productImageMiddle}}),t._v(" "),s("div",{staticClass:"fr product-info"},[s("h3",{staticClass:"f16 c32 name"},[t._v(t._s(t.initdata.productName))]),t._v(" "),s("p",{staticClass:"f12 c64 text"},[t._v("建议售价："),s("strong",{staticClass:"cred f16"},[t._v("￥"+t._s(t.initdata.suggestPrice.toFixed(2)))])]),t._v(" "),s("p",{staticClass:"f12 c64 text"},[t._v("已有库存："),s("span",{staticClass:"f14"},[t._v(t._s(t.initdata.stockNum))])])])]),t._v(" "),s("div",{staticClass:"product-list-num text-center display-flex"},[s("div",[s("p",{staticClass:"c32 f14 pb10"},[t._v("请输入本次实际制作的数量")]),t._v(" "),s("div",[s("st-input-number",{attrs:{min:0,max:500,mintip:"请输入本次制作数量",maxtip:"已达到最大制作数量","parent-num":t.num,size:"large"},on:{"change-number":t.onChangeNumber}})],1)])])]):t._e(),t._v(" "),s("div",{staticClass:"product-receive-record"},[s("div",{staticClass:"rs-container"},[s("div",{staticClass:"records"},[s("ul",{staticClass:"records timeAxis timeAxis-v"},t._l(t.orderList,function(i){return s("li",{key:i.index,staticClass:"records-item timeAxis-item"},[s("div",{staticClass:"timeAxis-item-c"},[s("div",{staticClass:"rs-item-c"},[s("div",{staticClass:"clearfix"},[s("span",{staticClass:"time fl c64"},[t._v(t._s(t.$changeDateToString(i.createTime)))]),t._v(" "),s("div",{staticClass:"fl"},[s("p",{staticClass:"c64 material-records-option"},[s("span",[t._v("操作人："+t._s(i.operator))]),t._v(" "),s("span",[t._v("制作了"),s("strong",{staticClass:"c32"},[t._v(t._s(i.productNum)+"款")]),t._v("该商品")]),s("span",[t._v("入库单号："+t._s(i.orderSn))])])])])])])])}))])])]),t._v(" "),t.isEmpty?s("div",{staticClass:"search-null text-center"},[t._m(0),t._v(" "),s("div",{staticClass:"text-center f14 c32"},[t._v("门店暂无制作记录")])]):t._e(),t._v(" "),s("st-notification",{attrs:{width:"40%",visible:t.dialogGroundingSuccess},on:{"update:visible":function(i){t.dialogGroundingSuccess=i},close:t.toMakeProduct}},[s("div",{staticClass:"pop-suc-box clearfix"},[s("i",{staticClass:"fl icon-zcp-suc"}),t._v(" "),s("div",{staticClass:"fl"},[s("p",{staticClass:"c32 f24"},[t._v("上架成功！")]),t._v(" "),s("p",{staticClass:"c96 tips"},[t._v("本次一共制作\n                    "),s("strong",{staticClass:"cblack"},[t._v(t._s(t.count)+"份")]),t._v("制成品\n                ")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"img"},[i("span",{staticClass:"icon"})])}]},r=s("Aizv")(n,c,!1,null,null,null);i.default=r.exports}});